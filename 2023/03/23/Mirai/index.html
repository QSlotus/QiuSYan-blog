<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人 | QiuSYan's Blog</title><meta name="author" content="QiuSYan"><meta name="copyright" content="QiuSYan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="利用你的电脑搭建一个QQ机器人">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人">
<meta property="og:url" content="http://halo-402.asia/2023/03/23/Mirai/index.html">
<meta property="og:site_name" content="QiuSYan&#39;s Blog">
<meta property="og:description" content="利用你的电脑搭建一个QQ机器人">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://halo-402.asia/photos/mirai.png">
<meta property="article:published_time" content="2023-03-23T02:33:00.000Z">
<meta property="article:modified_time" content="2023-04-14T06:21:00.000Z">
<meta property="article:author" content="QiuSYan">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Windows">
<meta property="article:tag" content="Mirai">
<meta property="article:tag" content="机器人搭建">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://halo-402.asia/photos/mirai.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://halo-402.asia/2023/03/23/Mirai/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.15/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c28fe30208463a1cbf11795b24e20459";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"SIL1PZF8M2","apiKey":"e6664129fc70ea8b308126573a3494cc","indexName":"Hexo","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":30,"position":"top","messagePrev":"这篇文章在距离上一次更新已经有","messageNext":"天啦，有可能已经失效了哟"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux&Windows+Mirai：利用Linux&Windows搭建一个QQ机器人',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-14 14:21:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 8 || hour >= 22
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="QiuSYan's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/photos/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/photos/mirai_top_img.png')"><nav id="nav"><span id="blog-info"><a href="/" title="QiuSYan's Blog"><span class="site-name">QiuSYan's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-23T02:33:00.000Z" title="发表于 2023-03-23 10:33:00">2023-03-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-14T06:21:00.000Z" title="更新于 2023-04-14 14:21:00">2023-04-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%95%BF%E7%AF%87%E5%A4%A7%E8%AE%BA/">长篇大论</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>最后更新： 2023.3.31</p>
</blockquote>
<hr>
<blockquote>
<p>环境配置： <code>CentOS 7.6</code> 、 <code>Ubuntu 22.04</code> 、 <code>Windows10 21H2</code></p>
</blockquote>
<blockquote>
<p>请打开你的 <code>SSH</code> ，之后都会在这里操作<br>什么？你还没有服务器？那就去这里白嫖一台 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://developer.aliyun.com/plan/student">高校计划 - 免费学生云服务器</a> </p>
</blockquote>
<blockquote>
<p>温馨提示：除了在 <font color="red">配置环境</font> 时 <code>CentOS</code> 与 <code>Ubuntu</code> 有细微差别，其他步骤都相同。（如果有些不同我会标注出来</p>
</blockquote>
<h1 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h1><p>由于我们选择的是阿里云的镜像，并非纯净镜像，所以一些基本的工具比如 <code>vim</code> 、 <code>wget</code> 就不用安装了（但是还有一些需要</p>
<p>安装 <code>unzip</code> 和 <code>screen</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># CentOS用户</span><br><span class="line">yum install unzip</span><br><span class="line">yum install screen</span><br><span class="line"></span><br><span class="line"># Ubuntu用户</span><br><span class="line">apt-get update      # 获取最新软件源</span><br><span class="line">apt-get upgrade     #更新软件包</span><br><span class="line">apt install unzip</span><br><span class="line">apt install screen</span><br></pre></td></tr></table></figure>

<blockquote>
<p><del>如果你是用的是纯净 CentOS 镜像，那请你看看我的<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ttj.asia/Tech/70.html">这一篇</a>文章，这里讲述了网卡、SSH连接、基本工具的安装等的配置，本教程不再赘述</del></p>
</blockquote>
<p>接下来安装 <code>JDK17</code></p>
<h2 id="安装-JDK17"><a href="#安装-JDK17" class="headerlink" title="安装 JDK17"></a>安装 JDK17</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><ol>
<li><p>下载 JDK17 安装包</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://d6.injdk.cn/openjdk/openjdk/17/openjdk-17.0.1_linux-x64_bin.tar.gz</span><br></pre></td></tr></table></figure></li>
<li><p>解压安装包，修改包名为jdk-17</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar zxf openjdk-17.0.1_linux-x64_bin.tar.gz</span><br><span class="line">rm -rf openjdk-17.0.1_linux-x64_bin.tar.gz</span><br><span class="line">mv jdk-17.0.1 jdk-17</span><br></pre></td></tr></table></figure></li>
<li><p>移动文件夹到/usr/local下</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv jdk-17 /usr/local/</span><br></pre></td></tr></table></figure></li>
<li><p>将java添加到环境变量中</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>

<p> 在文件的末尾添加：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/jdk-17</span><br><span class="line">export PATH=/usr/local/php/bin:/usr/local/jdk-17/bin:$PATH</span><br></pre></td></tr></table></figure></li>
<li><p>加载刚才修改的文件</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li>
<li><p>验证安装</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure></li>
<li><p>显示以下内容，则说明安装成功。</p>
<pre><code> [root@iZf8zgclasehk957la5s70Z ~]#  java -version
 openjdk version &quot;17.0.1&quot; 2021-10-19
 OpenJDK Runtime Environment (build 17.0.1+12-39)
 OpenJDK 64-Bit Server VM (build 17.0.1+12-39, mixed mode, sharing)
</code></pre>
</li>
</ol>
<h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p>Ubuntu 上安装 JDK17 非常简单。<br>安装 JDK-17：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install openjdk-17-jre</span><br></pre></td></tr></table></figure>

<h1 id="Mirai-相关"><a href="#Mirai-相关" class="headerlink" title="Mirai 相关"></a>Mirai 相关</h1><p>Mirai是一个免费开源高效率、支持全平台的qq机器人框架。<br>这也意味着你可以按照我的步骤在 <ruby><code>Windows/Linux/Mac</code><rt>虽然我没有Mac</rt></ruby> 上搭建你的机器人，搭建步骤大同小异。 </p>
<h2 id="下载-amp-配置-MCL"><a href="#下载-amp-配置-MCL" class="headerlink" title="下载 &amp; 配置 MCL"></a>下载 &amp; 配置 MCL</h2><ol>
<li><p>创建一个文件夹并进入 </p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir mcl</span><br><span class="line">cd mcl</span><br></pre></td></tr></table></figure></li>
<li><p>下载 mcl</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://ghproxy.com/https://github.com/iTXTech/mirai-console-loader/releases/download/v2.1.2/mcl-2.1.2.zip</span><br></pre></td></tr></table></figure>
</li>
<li><p>将文件解压</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip mcl-2.1.2.zip</span><br></pre></td></tr></table></figure>

<p> <strong>可以看到，一共是五个文件：</strong></p>
<pre><code> [root@iZf8zgclasehk957la5s70Z mcl]# unzip mcl-2.1.2.zip
 Archive:  mcl-2.1.2.zip
 inflating: LICENSE                 
 inflating: mcl                     
 inflating: mcl.cmd                 
 inflating: README.md               
 inflating: mcl.jar                 
</code></pre>
</li>
<li><p>启动 mcl </p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar mcl.jar</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果你是 <strong>Windows用户</strong> ，请启动 <code>mcl.cmd</code></p>
</blockquote>
<p> 初次启动会下载相关文件，等待即可。</p>
<pre><code> 2023-03-23 12:07:34 I/main: Backend: version 2.14.0, built on 2023-02-06 14:25:21.
 2023-03-23 12:07:34 I/main: Frontend Terminal: version 2.14.0, provided by Mamoe Technologies
 2023-03-23 12:07:34 I/main: Welcome to visit https://mirai.mamoe.net/
 2023-03-23 12:07:53 I/plugin: Successfully loaded plugin MCL Addon v2.1.1
 2023-03-23 12:07:53 I/main: Prepared built-in commands: autoLogin, help, login, logout, permission, status, stop
 2023-03-23 12:07:53 I/MCL Addon: iTXTech MCL Version: 2.1.2-61c8bd8
 2023-03-23 12:07:53 W/MCL Addon: iTXTech Soyuz 未安装，Soyuz MCL Handler 特性已禁用
 2023-03-23 12:07:53 I/main: 1 plugin(s) enabled.
 2023-03-23 12:07:53 I/main: mirai-console started successfully.
</code></pre>
<p> <strong>当出现 <code>mirai-console started successfully.</code> 时，启动成功。</strong></p>
</li>
</ol>
<h2 id="账号相关"><a href="#账号相关" class="headerlink" title="账号相关"></a>账号相关</h2><h3 id="登录前"><a href="#登录前" class="headerlink" title="登录前"></a>登录前</h3><p>在 <code>「&gt;」</code> 后输入你的账号密码，格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/autoLogin add &lt;account&gt; &lt;password&gt;</span><br></pre></td></tr></table></figure>
<p>当输出 <code>已成功添加xxxxxxxx</code> 时，输入 <code>stop</code> 停止mcl。</p>
<p>随后进入 <code>config/Console</code> ，修改配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd config/Console</span><br><span class="line">vim AutoLogin.yml</span><br></pre></td></tr></table></figure>
<blockquote>
<p><img src="https://ttj.asia/usr/uploads/2023/03/1159453416.jpg" alt="1"></p>
</blockquote>
<p>如图所示，将下列配置覆盖到最底端的 <code>configuration: &#123;&#125;</code> 处：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">configuration:</span><br><span class="line">    protocol: MACOS</span><br><span class="line">    device: device.json</span><br><span class="line">    enable: true</span><br><span class="line">    heartbeatStrategy: STAT_HB</span><br></pre></td></tr></table></figure>
<p>最后 按 <code>Esc</code> ，输入 <code>:wq</code> 保存并退出。</p>
<p>还要加一个 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cssxsh/fix-protocol-version"><code>MACOS</code> 协议修复插件</a>。进入到 <code>/mcl/plugins</code> 目录中，输入wget命令下载 <code>fix-protocol-version</code> 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://ghproxy.com/https://github.com/cssxsh/fix-protocol-version/releases/download/v1.3.0/fix-protocol-version-1.3.0.mirai2.jar</span><br></pre></td></tr></table></figure>

<p><strong>至此，登录前的准备已经做完了。</strong></p>
<h3 id="滑块验证"><a href="#滑块验证" class="headerlink" title="滑块验证"></a>滑块验证</h3><p>我们回到 <code>/mcl</code> 目录。输入启动指令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar mcl.jar</span><br></pre></td></tr></table></figure>
<p>启动后，你会得到这样一串信息：</p>
<pre><code>2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] 需要滑动验证码, 请按照以下链接的步骤完成滑动验证码, 然后输入获取到的 ticket
2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] Slider captcha required. Please solve the captcha with following link. Type ticket here after completion.
2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] @see https://github.com/project-mirai/mirai-login-solver-selenium
2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] @see https://docs.mirai.mamoe.net/mirai-login-solver-selenium/
2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] 或者输入 TxCaptchaHelper 来使用 TxCaptchaHelper 完成滑动验证码
2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] Or type `TxCaptchaHelper` to resolve slider captcha with TxCaptchaHelper.apk
2023-03-23 18:34:41 I/Bot.XXXXXXXXXX: [SliderCaptcha] Captcha link: https://ssl.captcha.qq.com/template/wireless_mqq_captcha.html?style=simple&amp;aid=16&amp;uin=XXXXXXXXXX&amp;sid=3441086262606048065&amp;cap_cd=LuV-T_iP24eU_j0vJNb9mufTbQFF0UJtGt7ykjyqdIUdtGrI4gojDw**&amp;clientype=1&amp;apptype=2
</code></pre>
<p>请打开你的 <code>Edge/Google Chrome</code> ，将 <code>Captcha link</code> 复制至浏览器，打开。<br>打开后先不要滑动，按 <code>F12</code> 键打开<strong>开发者工具</strong><br>选定 <code>网络</code>。随后完成滑块验证。<br>验证完毕后你将其滑到底端，找到一个叫 <code>cap_union_new_verify</code> 的请求。</p>
<blockquote>
<p><img src="https://ttj.asia/usr/uploads/2023/03/40242609.png" alt="114514"></p>
</blockquote>
<p>你将会在 <code>网络</code> – <code>cap_union_new_verify</code> – <code>预览</code> 找到一个 <code>ticket</code> 。</p>
<blockquote>
<p><img src="https://ttj.asia/usr/uploads/2023/03/2242885675.png" alt="1919"></p>
</blockquote>
<p>将鼠标移动到上面，右键 – <code>复制值</code> ，将其粘贴到终端中，回车。<br>随后是一个验证码，输入 yes 即可。最后将你收到的验证码粘贴到终端中，回车。</p>
<p><strong>Login successful.</strong></p>
<h1 id="权限节点讲解"><a href="#权限节点讲解" class="headerlink" title="权限节点讲解"></a>权限节点讲解</h1><p>权限节点说明文档：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.mirai.mamoe.net/console/Permissions.html#%E8%A2%AB%E8%AE%B8%E5%8F%AF%E4%BA%BA-id">Mirai Console Backend - Permissions</a></p>
<img src="/photos/Mirai权限系统 - 被许可人ID.png" alt="Mirai权限系统 - 被许可人ID" title="Mirai权限系统 - 被许可人ID">

<p>就以 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/NLR-DevTeam/GrassPictures#commands-">Grass-Pictures - Commands</a> 的权限节点为例；</p>
<img src="/photos/Grass-Pic 草图权限.png" alt="Grass-Pic 草图权限" title="Grass-Pic 草图权限">

<p>如果我想在一个群号为 <code>114514</code> 的群中给予本群的所有群员 <strong>获取草图</strong> 的权限，那你需要在 <strong>控制台</strong> 中输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/perm add m114514.* cn.whitrayhb.grasspics:command.grass-pic</span><br></pre></td></tr></table></figure>
<p>以此类推，如果你需要给一个 QQ号为 <code>1919810</code> 的人 <strong>获取草图当前状态</strong> 的权限，那你需要在 <strong>控制台</strong> 中输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/perm add u1919810 cn.whitrayhb.grasspics:command.grass-pic-status</span><br></pre></td></tr></table></figure>



<h1 id="插件推荐"><a href="#插件推荐" class="headerlink" title="插件推荐"></a>插件推荐</h1><h2 id="Chat-Command"><a href="#Chat-Command" class="headerlink" title="Chat-Command"></a>Chat-Command</h2><blockquote>
<p>允许在聊天环境下执行指令。</p>
</blockquote>
<p>项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/project-mirai/chat-command">project-mirai/chat-command: Chat command executor for mirai-console</a></p>
<p>最新版（0.6.0） Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/project-mirai/chat-command/releases/download/v0.6.0/chat-command-0.6.0.mirai.jar">0.6.0</a></p>
<p>请先通过 /perm 为用户设置指定指令的权限. 详见 Mirai Console 的 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.mirai.mamoe.net/console/Permissions.html">权限文档</a> .</p>
<h2 id="Grass-Pic"><a href="#Grass-Pic" class="headerlink" title="Grass-Pic"></a>Grass-Pic</h2><blockquote>
<p>在 QQ 群聊中接入草图的服务。</p>
</blockquote>
<p>项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/NLR-DevTeam/GrassPictures">NLR-DevTeam/GrassPictures: 在 QQ 群聊中接入草图的服务</a></p>
<p>最新版（1.20） Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/NLR-DevTeam/GrassPictures/releases/download/1.2.0/GrassPictures-1.2.0.mirai2.jar">1.2.0 - Fix shit &amp; Reload command</a></p>
<p>所需权限：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>指令</th>
<th>指令功能</th>
<th>权限节点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>生草</strong></td>
<td><li>来张草图</li><li>生草</li><li>grass-pic</li></td>
<td>来一张草图</td>
<td><code>cn.whitrayhb.grasspics:command.grass-pic</code></td>
</tr>
<tr>
<td><strong>草图信息</strong></td>
<td><li>草图信息</li><li>grass-pic-status</li></td>
<td>获取草图当前状态</td>
<td><code>cn.whitrayhb.grasspics:command.grass-pic-status</code></td>
</tr>
<tr>
<td><strong>投稿草图</strong></td>
<td><li>草图投稿</li><li>投稿草图</li><li>post-grass-pic</li></td>
<td>向草图库投稿</td>
<td><code>cn.whitrayhb.grasspics:command.post-grass-pic</code></td>
</tr>
</tbody></table>
<p><b><big>注意：请不要在短时间内获取大量草图，否则会被 <del>封禁IP</del> 限流</big> <del>（惨痛教训😭😭😭</del> 但是可以通过加入他们的 QQ 群解除</b></p>
<img src="/photos/解封实录（.jpg" alt="解封实录（" title="解封实录（">

<h2 id="DouDiZhu"><a href="#DouDiZhu" class="headerlink" title="DouDiZhu"></a>DouDiZhu</h2><blockquote>
<p>一个能在QQ上斗地主的mirai插件。</p>
</blockquote>
<p>项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/kono-dada/doudizhu">kono-dada/doudizhu: 一个能在QQ上斗地主的mirai插件</a></p>
<p>最新版（1.12） Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/kono-dada/doudizhu/releases/download/1.1.2/douDiZhu-1.1.2.jar">斗地主1.12</a></p>
<p>规则介绍：</p>
<pre><code>斗地主规则介绍：
在游戏群内发送“创建游戏”，即可创建一个游戏。
发送“上桌”参与游戏
当上桌人数达3人后，任意玩家发送“开始游戏”即可开始斗地主
出牌阶段，发送“/&lt;你要出的牌&gt;”在与bot的私聊或者群聊中即可出牌。如“/10jqka”就表示出了一个顺子。
抢地主时，请在群内说 “抢/不抢”
如果要不起，发送“要不起”或者“不要”
当管理员发送“结束游戏”时，游戏会被强制结束。
破产时申请补助：在群内输入“/d beg”
查询自己的point数量与胜率：在群内输入“/d me”
</code></pre>
<p>权限相关：</p>
<pre><code>添加群为游戏群：在 控制台 输入指令&quot;/dc addgroup &lt;群号&gt;&quot;即可。如&quot;/dc addgroup 123456789&quot;。 
添加管理员：在 控制台 输入指令&quot;/dc addadmin &lt;QQ号&gt;&quot;即可。如&quot;/dc addadmin 123456789&quot;
</code></pre>
<h2 id="NiuZi"><a href="#NiuZi" class="headerlink" title="NiuZi"></a>NiuZi</h2><blockquote>
<p>NiuZi 牛子系统 —— 在 QQ 群内耍牛子吧！</p>
</blockquote>
<p>项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Micalhl/NiuZi">Micalhl/NiuZi: 牛子系统。</a></p>
<p>Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mcstarrysky.oss-cn-beijing.aliyuncs.com/NiuZi-1.1-hotfix2.mirai.jar">Download</a></p>
<p>原帖 &amp; 项目介绍地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mirai.mamoe.net/topic/1872/niuzi-%E7%89%9B%E5%AD%90%E7%B3%BB%E7%BB%9F-%E5%9C%A8-qq-%E7%BE%A4%E5%86%85%E8%80%8D%E7%89%9B%E5%AD%90%E5%90%A7/1">NiuZi 牛子系统 —— 在 QQ 群内耍牛子吧！</a></p>
<p>命令列表：</p>
<pre><code>牛子养成系统(未开发完成)
命令：改牛子名 [要改的名字]  改你的牛子的名字，支持空格，最长10个字
命令：搞对象 [@对方]  和别人搞对象
命令：贴贴！   和对象贴贴！
命令：我的对象   查看你的对象的牛子信息
命令：变女性   转变为女性，扣除50厘米
命令：处理请求 [搞对象/分手] [同意/不同意]  管理你的请求
命令：我的牛子   查看你的牛子
命令：我要分手   和你的对象分手
命令：比划比划 [@对方]  比划一下，赢加长度输减长度，断掉双方都减长度
命令：群牛子排行   查看牛子排行榜
命令：领养牛子   领养一只牛子
命令：牛子榜   查看牛子排行榜
</code></pre>
<p><strong>注：使用此插件你需要安装 <code>MySQL</code> 并创建一个数据库，数据库具体配置如下</strong></p>
<p>配置文件（地址：<code>config/NiuZi/settings.yml</code> ）：</p>
<pre><code># 是否为第一次启动，是检测数据库的配置。
# 一定要设置成 false，否则无法使用！
firstEnable: false
# 功能「比划比划」的冷却时长，单位为秒，默认为一小时。
pkCd: 3600
# MySQL 数据库地址
databaseAddress: localhost
# MySQL 数据库端口
databasePort: 3306
# MySQL 数据库名
databaseName: laoshu
# MySQL 数据库用户名
databaseUser: laoshu
# MySQL 数据库用户密码
databasePassword: password   # 你的数据库密码
</code></pre>
<h2 id="WeiboHelper"><a href="#WeiboHelper" class="headerlink" title="WeiboHelper"></a>WeiboHelper</h2><blockquote>
<p>基于 Mirai Console 的 微博 转发插件<br>使用前请确保已安装插件 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/project-mirai/chat-command">Chat-Command</a><br>插件基于PC网页版微博API，使用插件需要登录一个微博账号<br>插件初始化时，如果恢复登录状态失败，则会尝试模拟游客</p>
</blockquote>
<p>项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cssxsh/weibo-helper">cssxsh/weibo-helper: Mirai Console 插件开发计划</a></p>
<p>最新版 （1.6.1） Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/cssxsh/weibo-helper/releases/download/v1.6.1/weibo-helper-1.6.1.mirai2.jar">v1.6.1</a></p>
<p>具体指令请移步 Github项目地�� ，此处不再赘述。</p>
<h2 id="Lolicon"><a href="#Lolicon" class="headerlink" title="Lolicon"></a>Lolicon</h2><blockquote>
<p>涩图插件喜加一！</p>
</blockquote>
<p>项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Samarium150/mirai-console-lolicon">Samarium150/mirai-console-lolicon: 基于LoliconAPI的mirai-console插件</a></p>
<p>最新版（6.0.8） Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/Samarium150/mirai-console-lolicon/releases/download/6.0.8/mirai-console-lolicon-6.0.8.mirai2.jar">6.0.8</a></p>
<p>如何食用？<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Samarium150/mirai-console-lolicon/wiki">WiKi</a></p>
<h2 id="Skia"><a href="#Skia" class="headerlink" title="Skia"></a>Skia</h2><blockquote>
<p>Mirai Console Skiko/Skia 图像库前置插件</p>
</blockquote>
<big>
    <font color="red"><b>注意：如果想要使用此插件，你需要安装 <code>GLIBC-2.27</code></b></font>
</big>

<p><b><ruby>然而安装过程及其麻烦 <small>（指 <code>CentOS 7</code></small><rt>惨  痛  教  训</rt></ruby>，建议选择系统为 <code>Ubuntu 22.04</code> 的服务器搭载 Mirai</b></p>
<p><b>Ubuntu 22.04 自带 GLIBC-2.35，无需额外安装。</b></p>
<p>你可以通过在命令行输入：</p>
<pre><code>ldd --version
</code></pre>
<p>来验证你的 <code>GLIBC</code> 版本。<b>（如果版本为x.xx那么意味着它包含了x.xx及以下的 GLIBC</b></p>
<p>项目地址： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cssxsh/mirai-skia-plugin">cssxsh/mirai-skia-plugin: Mirai Console Skiko/Skia 图像库前置插件</a></p>
<p>最新版 （1.3.1） Release 下载地址： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/cssxsh/mirai-skia-plugin/releases/download/v1.3.1/mirai-skia-plugin-1.3.1.mirai2.jar">v1.3.1</a></p>
<h2 id="Meme-Helper"><a href="#Meme-Helper" class="headerlink" title="Meme Helper"></a>Meme Helper</h2><blockquote>
<p>基于 Mirai Console 的 MEME 生成插件</p>
</blockquote>
<p><font color="red"><b>注意：该插件需要前置插件 —— <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.cnblogs.com/QiuSYan/p/Mirai.html#skia">Skia</a></b></font></p>
<p>项目地址： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cssxsh/meme-helper">cssxsh/meme-helper: Mirai Console 表情包生成插件</a></p>
<p>最新版 （1.2.0） Release 下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/cssxsh/meme-helper/releases/download/v1.2.0/meme-helper-1.2.0.mirai2.jar">v1.2.0</a></p>
<p>权限ID：<code>xyz.cssxsh.mirai.plugin.meme-helper:*</code></p>
<p>食用方法：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cssxsh/meme-helper#readme">Readme.md</a></p>
<br>

<h1 id="对于-Windows-用户"><a href="#对于-Windows-用户" class="headerlink" title="对于 Windows 用户"></a>对于 Windows 用户</h1><h2 id="安装-JDK17-1"><a href="#安装-JDK17-1" class="headerlink" title="安装 JDK17"></a>安装 JDK17</h2><p>打开 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.oracle.com/cn/java/technologies/downloads/#jdk17-windows">Java Downloads</a>，选择 <code>x64 Installer</code> 点击下载。<br>或者直接点击 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.exe">此处</a> 下载。</p>
<p>下载完成后，双击运行。<br><img src="/photos/step1.png" title="step1"></p>
<p>点击 <code>下一步</code> 。</p>
<img src="/photos/step2.png" title="step2">

<p>在这一步选择你的 JDK17 安装路径。<br>点击 <code>下一步</code> 后，等待安装完毕。</p>
<img src="/photos/step3.png" title="step3">

<img src="/photos/step4.png" title="step4">

<p>点击 <code>关闭</code> ，JDK17安装完毕。<br>随后验证安装。</p>
<p>按 <code>Win + R</code> 唤出 <code>运行</code>，输入 <code>cmd</code> ，回车。</p>
<img src="/photos/step5.png" title="step5">

<p>输入 <code>java -version</code> 验证安装。</p>
<img src="/photos/step6.png" title="step6">

<img src="/photos/step7.png" title="step7">

<p>安装成功！</p>
<h2 id="下载-MCL"><a href="#下载-MCL" class="headerlink" title="下载 MCL"></a>下载 MCL</h2><p>打开 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://ghproxy.com/https://github.com/iTXTech/mirai-console-loader/releases/download/v2.1.2/mcl-2.1.2.zip">MCL-2.1.2</a>，下载MCL。</p>
<p>等待下载完毕后，右键解压。</p>
<img src="/photos/step1-mcl.png" title="step1">

<p>打开文件夹，双击 <code>mcl.cmd</code> 启动mcl。</p>
<img src="/photos/step2-mcl.png" title="step2">

<p>第一次启动会下载相关文件，等待即可。</p>
<img src="/photos/step3-mcl.png" title="step3">


<p>剩下部分请查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.cnblogs.com/QiuSYan/p/Mirai.html#%E7%99%BB%E5%BD%95%E5%89%8D">此处</a></p>
<h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><p>其他的无非是去 Mirai 论坛/Github 寻找你喜欢的插件，再将它们以 wget/ftp 的形式下载/上传到 <code>/mcl/plugins</code> 目录下。</p>
<p>好了，去享受你的机器人吧 (￣︶￣*))</p>
<p>有任何问题欢迎咨询我 Email：<a href="mailto:&#104;&#x61;&#x6c;&#111;&#45;&#x34;&#48;&#50;&#x40;&#x6f;&#x75;&#x74;&#108;&#x6f;&#111;&#107;&#x2e;&#99;&#111;&#x6d;" rel="external nofollow noreferrer">&#104;&#x61;&#x6c;&#111;&#45;&#x34;&#48;&#50;&#x40;&#x6f;&#x75;&#x74;&#108;&#x6f;&#111;&#107;&#x2e;&#99;&#111;&#x6d;</a></p>
<hr>
<p>End.</p>
<p><del>PS：后续可能会考虑加一个Windows用户的教程和一些插件的补充说明</del> <b>已经加完力（喜</b></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://halo-402.asia">QiuSYan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://halo-402.asia/2023/03/23/Mirai/">http://halo-402.asia/2023/03/23/Mirai/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://halo-402.asia" target="_blank">QiuSYan's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Windows/">Windows</a><a class="post-meta__tags" href="/tags/Mirai/">Mirai</a><a class="post-meta__tags" href="/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%90%AD%E5%BB%BA/">机器人搭建</a></div><div class="post_share"><div class="social-share" data-image="/photos/mirai.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/photos/wechat.png" target="_blank"><img class="post-qr-code-img" src="/photos/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/photos/alipay.png" target="_blank"><img class="post-qr-code-img" src="/photos/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2023/01/23/ubuntu-1/" title="Ubuntu文件/文件夹带锁解决办法"><img class="cover" src="/photos/ubuntu.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Ubuntu文件/文件夹带锁解决办法</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/photos/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">QiuSYan</div><div class="author-info__description">自能生羽翼，何必仰云梯</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" href="https://halo-402.asia/atom.xml"><i class="fa-solid fa-rss"></i><span>Feed Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:halo-402@outlook.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/QSlotus" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2478314183&amp;site=qq&amp;menu=yes" rel="external nofollow noreferrer" target="_blank" title="QQ"><i class="fa-brands fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="https://twitter.com/_QiuSYan_" rel="external nofollow noreferrer" target="_blank" title="Twitter"><i class="fa-brands fa-twitter" style="color: #24292e;"></i></a><a class="social-icon" href="https://www.facebook.com/QiuSYan" rel="external nofollow noreferrer" target="_blank" title="Facebook"><i class="fa-brands fa-facebook" style="color: #24292e;"></i></a><a class="social-icon" href="https://t.me/QiuSYan" rel="external nofollow noreferrer" target="_blank" title="Telegram"><i class="fa-brands fa-telegram" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><b>新的起点，新的开始</b></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">配置环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-JDK17"><span class="toc-number">1.1.</span> <span class="toc-text">安装 JDK17</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS"><span class="toc-number">1.1.1.</span> <span class="toc-text">CentOS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ubuntu"><span class="toc-number">1.1.2.</span> <span class="toc-text">Ubuntu</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mirai-%E7%9B%B8%E5%85%B3"><span class="toc-number">2.</span> <span class="toc-text">Mirai 相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-amp-%E9%85%8D%E7%BD%AE-MCL"><span class="toc-number">2.1.</span> <span class="toc-text">下载 &amp; 配置 MCL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%A6%E5%8F%B7%E7%9B%B8%E5%85%B3"><span class="toc-number">2.2.</span> <span class="toc-text">账号相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%89%8D"><span class="toc-number">2.2.1.</span> <span class="toc-text">登录前</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81"><span class="toc-number">2.2.2.</span> <span class="toc-text">滑块验证</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E8%8A%82%E7%82%B9%E8%AE%B2%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">权限节点讲解</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90"><span class="toc-number">4.</span> <span class="toc-text">插件推荐</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Chat-Command"><span class="toc-number">4.1.</span> <span class="toc-text">Chat-Command</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grass-Pic"><span class="toc-number">4.2.</span> <span class="toc-text">Grass-Pic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DouDiZhu"><span class="toc-number">4.3.</span> <span class="toc-text">DouDiZhu</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NiuZi"><span class="toc-number">4.4.</span> <span class="toc-text">NiuZi</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WeiboHelper"><span class="toc-number">4.5.</span> <span class="toc-text">WeiboHelper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lolicon"><span class="toc-number">4.6.</span> <span class="toc-text">Lolicon</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Skia"><span class="toc-number">4.7.</span> <span class="toc-text">Skia</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Meme-Helper"><span class="toc-number">4.8.</span> <span class="toc-text">Meme Helper</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8E-Windows-%E7%94%A8%E6%88%B7"><span class="toc-number">5.</span> <span class="toc-text">对于 Windows 用户</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-JDK17-1"><span class="toc-number">5.1.</span> <span class="toc-text">安装 JDK17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-MCL"><span class="toc-number">5.2.</span> <span class="toc-text">下载 MCL</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F"><span class="toc-number">6.</span> <span class="toc-text">结束</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/23/Mirai/" title="Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人"><img src="/photos/mirai.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人"/></a><div class="content"><a class="title" href="/2023/03/23/Mirai/" title="Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人">Linux&amp;Windows+Mirai：利用Linux&amp;Windows搭建一个QQ机器人</a><time datetime="2023-03-23T02:33:00.000Z" title="发表于 2023-03-23 10:33:00">2023-03-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/23/ubuntu-1/" title="Ubuntu文件/文件夹带锁解决办法"><img src="/photos/ubuntu.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu文件/文件夹带锁解决办法"/></a><div class="content"><a class="title" href="/2023/01/23/ubuntu-1/" title="Ubuntu文件/文件夹带锁解决办法">Ubuntu文件/文件夹带锁解决办法</a><time datetime="2023-01-23T09:33:08.000Z" title="发表于 2023-01-23 17:33:08">2023-01-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/22/todesk-ubuntu/" title="Ubuntu 上 Todesk 无法启动解决办法"><img src="/photos/ubuntu.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu 上 Todesk 无法启动解决办法"/></a><div class="content"><a class="title" href="/2023/01/22/todesk-ubuntu/" title="Ubuntu 上 Todesk 无法启动解决办法">Ubuntu 上 Todesk 无法启动解决办法</a><time datetime="2023-01-22T10:52:02.000Z" title="发表于 2023-01-22 18:52:02">2023-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/23/cravatar/" title="Typecho 便捷式更改 评论Gravatar头像源"><img src="/photos/Cravatar.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Typecho 便捷式更改 评论Gravatar头像源"/></a><div class="content"><a class="title" href="/2022/12/23/cravatar/" title="Typecho 便捷式更改 评论Gravatar头像源">Typecho 便捷式更改 评论Gravatar头像源</a><time datetime="2022-12-23T00:54:38.000Z" title="发表于 2022-12-23 08:54:38">2022-12-23</time></div></div></div></div></div></div></main><footer id="footer" style="background: #808080"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By QiuSYan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><p><b><big>欢迎来到我的小站</big></b></p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io"><img src="/svg/Hexo.svg"></a> &nbsp&nbsp <a target="_blank" rel="noopener external nofollow noreferrer" href="https://butterfly.js.org"><img src="/svg/Butterfly.svg"></a>  &nbsp&nbsp <a target="_blank" rel="noopener external nofollow noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="/svg/Copyright.svg"></a><br/><a target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/"><img src="/svg/Vercel.svg"></a> &nbsp&nbsp <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com"><img src="/svg/Github.svg"></a> &nbsp&nbsp <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.algolia.com"><img src="/svg/Algolia.svg"></a><br/><a target="_blank" rel="noopener external nofollow noreferrer" href="https://leancloud.cn"><img src="/svg/Leancloud.svg"></a> &nbsp&nbsp <a target="_blank" rel="noopener external nofollow noreferrer" href="https://valine.js.org"><img src="/svg/Valine.svg"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://unpkg.com/hexo-theme-butterfly/source/js/utils.js"></script><script src="https://unpkg.com/hexo-theme-butterfly/source/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.15/fancybox/fancybox.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.2.0/instantpage.min.js" type="module"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'DJajauip2iTFhqgcDGrUbWUz-gzGzoHsz',
      appKey: 'JqMwxSc90KuK2trVxPF34TZU',
      avatar: 'monsterid',
      serverURLs: 'https://djajauip.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, "/js/Valine.min.js"))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdnjs.cloudflare.com/ajax/libs/valine/1.5.1/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=monsterid'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://djajauip.lc-cn-n1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'DJajauip2iTFhqgcDGrUbWUz-gzGzoHsz',
        "X-LC-Key": 'JqMwxSc90KuK2trVxPF34TZU',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/canvas-nest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-heart.min.js" async="async" mobile="true"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.17.0/algoliasearch-lite.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.54.0/instantsearch.production.min.js"></script><script src="https://unpkg.com/hexo-theme-butterfly/source/js/search/algolia.js"></script></div></div></body></html>